# 2024-NC2-M38-SensitiveContentAnalysis
## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

## ğŸ’¡ About Augmented Reality
> **âš ï¸ ì´ë¯¸ì§€ë‚˜ ë¹„ë””ì˜¤ì—ì„œ ë¶ˆê±´ì „í•˜ê±°ë‚˜ ë¶€ì ì ˆí•œ ì½˜í…ì¸ ë¥¼ ê°ì§€í•˜ëŠ” ê¸°ëŠ¥**

**ì´ ê¸°ìˆ ì€ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆì„ê¹Œìš”?**
> 
- ì™¸ë¶€ë¡œë¶€í„° ì—…ë¡œë“œë˜ëŠ” ì´ë¯¸ì§€ë‚˜ ì˜ìƒì´ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ”ì§€ë¥¼ ì²´í¬í•˜ëŠ” ìƒí™©ì— ì´ í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆì–´ìš”
- ë©”ì„¸ì§€ ì•±(iMessage), êµì‹¤(Classroom) ì•± ë“±ì—ì„œ í™œìš©ë˜ê³  ìˆì–´ìš”.
    - ex ) ë©”ì„¸ì§€ ì•±ì— ì—…ë¡œë“œëœ ì½˜í…ì¸ ê°€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ”ì§€ ì²´í¬í•¨
    - ex ) êµì‹¤ ì•±ì—ì„œëŠ” ê°œì¸ ê¸°ê¸°ë¡œë¶€í„° í•™ê¸‰ì˜ ê³¼ì œ ì œì¶œ í˜¹ì€ ê¸°íƒ€ í•™ê¸‰ í™œë™ì„ ìœ„í•œ ê³µìš© ê³µê°„ìœ¼ë¡œ
    ì—…ë¡œë“œëœ ì½˜í…ì¸ ê°€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ê³ , ê°œì…í•  ìˆ˜ ìˆìŒ

## ğŸ¯ What we focus on?
- **ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ìƒíƒœ ê´€ë¦¬**
    - `@State` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶„ì„ ìƒíƒœ(`AnalysisState`)ë¥¼ ê´€ë¦¬í•˜ê³ , ë¶„ì„ ìƒíƒœì— ë”°ë¼ UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
- **ë¹„ë™ê¸° ì´ë¯¸ì§€ ë¶„ì„**
    - `isSensitive(image:)` ë¡œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë°›ì•„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¯¼ê° ì½˜í…ì¸ ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
- **ì¡°ê±´ë¶€ UI ë Œë”ë§**
    - `analysisState`ì˜ ê°’ì— ë”°ë¼ ë‹¤ë¥¸ UI ìš”ì†Œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´, ë¶„ì„ ì¤‘ì¼ ë•ŒëŠ” ProgressViewë¥¼, ë¯¼ê°í•œ ì½˜í…ì¸ ê°€ ê°ì§€ë˜ì—ˆì„ ë•ŒëŠ” ë¸”ëŸ¬ ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
- **ì• ë‹ˆë©”ì´ì…˜**
    - ë¯¼ê° ì½˜í…ì¸ ê°€ ê°ì§€ë˜ì—ˆì„ ë•Œ, ë¸”ëŸ¬ ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ë¸”ëŸ¬ë¥¼ í•´ì œí•©ë‹ˆë‹¤.

## ğŸ’¼ Use Case
> ìµëª…ì˜ ìª½ì§€ì•±ì„ ì‚¬ìš©í•˜ë‹¤ ëˆ„êµ°ê°€ ë³´ë‚¸ ë¯¼ê°í•œ ì‚¬ì§„ì„ í•„í„°ë§í•´ì£¼ì!

## ğŸ–¼ï¸ Prototype

<table>
  <tbody>
    <tr>
      <td colspan="1" align="center"><b>ë‹‰ë„¤ì„ ë“±ë¡</b></td>
      <td colspan="1" align="center"><b>ìª½ì§€ ì‘ì„±</b></td>
      <td colspan="1" align="center"><b>ë°›ì€ ìª½ì§€í•¨</b></td>
      <td colspan="1" align="center"><b>ë¯¼ê° ì •ë³´ í•„í„°ë§</b></td>
    </tr>
    <tr>
      <td align="center"><img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M38-SensitiveContentAnalysis/assets/64794813/4752b940-733d-405c-a9c0-001cf48159e0" width="260px;" alt=""/></td>
      <td align="center"><img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M38-SensitiveContentAnalysis/assets/64794813/cfc11098-dfa8-48d3-9fe9-7a707bd44470" width="260px;" alt=""/></td>
      <td align="center"><img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M38-SensitiveContentAnalysis/assets/64794813/86161290-bd3b-4649-9dc3-83a825846f64" width="260px;" alt=""/></td>
      <td align="center"><img src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M38-SensitiveContentAnalysis/assets/64794813/856f8183-a6e8-44c2-8ece-e559c5217732" width="260px;" alt=""/></td>
    </tr>
  </tbody>
</table>

## ğŸ› ï¸ About Code
### ë¯¼ê° ì •ë³´ì¸ì§€ ë¹„ë™ê¸°ì ìœ¼ë¡œ í™•ì¸

```swift
enum AnalysisState { // ë¶„ì„ ìƒíƒœë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ì—´ê±°í˜•
        case notStarted
        case analyzing
        case isSensitive
        case notSensitive
        case error(message: String)
    }
    
func isSensitive(image: Data?) async {  // ë¯¼ê° ì •ë³´ì¸ì§€ ë¹„ë™ê¸°ì ìœ¼ë¡œ í™•ì¸
        analysisState = .analyzing
        let analyzer = SCSensitivityAnalyzer()
        let policy = analyzer.analysisPolicy
        
        if policy == .disabled {
            print("Policy is disabled")
        }
        
        do {
            guard let image = UIImage(data: image!)
            else {
                print("Image not found")
                analysisState = .error(message: "Image not found")
                return
            }
            let response = try await analyzer.analyzeImage(image.cgImage!)
            analysisState = response.isSensitive ? .isSensitive : .notSensitive
        } catch {
            print("Unable to get a response", error)
            analysisState = .error(message: error.localizedDescription)
        }
    }
```

- ë¶„ì„ìƒíƒœëŠ” `AnalysisState` enumìœ¼ë¡œ êµ¬ë¶„í•¨
- `isSensitive` í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë¨
    - ì´ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¼ê° ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ê·¸ ê²°ê³¼ì— ë”°ë¼ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•¨
    - ë¹„ë™ê¸°ì  ì²˜ë¦¬ëŠ” ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œì´ë‚˜ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆëŠ” ì‘ì—…ì—ì„œ UIê°€ ì¤‘ë‹¨ë˜ì§€ ì•Šê³  ì›í™œí•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ

### ì‘ë‹µì„ ë°”íƒ•ìœ¼ë¡œ í•„í„°ë§ ì ìš©
```swift
 case .isSensitive:
                        if let imageData = post.image, let uiImage = UIImage(data: imageData) {
                            ZStack {
                                Image(uiImage: uiImage)
                                
                                // ë¯¼ê° ì •ë³´ ë¸”ëŸ¬ ì²˜ë¦¬
                                if !showSensitiveContent {
                                    Color.black.opacity(0.5)
                                        .frame(height: 200)
                                        .cornerRadius(10)
                                    
                                    // ë¸”ëŸ¬ ì´ë¯¸ì§€
                                    VStack {
                                        Image(systemName: "eye.slash")
                                            .font(.system(size: 50))
                                            .foregroundColor(.white)
                                        Text("Sensitive Content")
                                            .font(.title)
                                            .foregroundColor(.white)
                                            .padding(.top, 10)
                                        Text("This photo may contain graphic or violent content.")
                                            .font(.body)
                                            .foregroundColor(.white)
                                            .padding(.top, 5)
                                        Button(action: {
                                            withAnimation {
                                                showSensitiveContent = true
                                            }
                                        }) {
                                            Text("See why")
                                                .foregroundColor(.white)
                                                .padding()
                                                .background(Color.gray.opacity(0.7))
                                                .cornerRadius(10)
                                                .padding(.top, 20)
                                        }
                                    }
                                    .padding()
                                    .background(Color.black.opacity(0.5))
                                    .cornerRadius(20)
                                }
                            }
                        }
```

- `SCSensitivityAnalyzer`ì—ì„œ policyì— ëŒ€í•œ ì‘ë‹µì„ ë°›ì€ í›„
    - `isSensitive` ìƒíƒœì¼ ë•Œ ì¦‰, ë¯¼ê°ì •ë³´ì¼ ê²½ìš°ì— í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ë¸”ëŸ¬ì²˜ë¦¬ í•´ì¤Œ
